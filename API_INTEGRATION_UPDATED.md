# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API Deadline Bot

–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å API https://deadlinetaskbot.productlove.ru/api/v1

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–π —Ñ–∞–π–ª: `src/services/deadlineTaskApi.ts`
–ö–ª–∞—Å—Å `DeadlineTaskApi` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º API Deadline Bot. –ú–µ—Ç–æ–¥—ã:
- `createTask()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `deleteTask(taskId)` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ ID
- `deleteAllCancelledTasks()` - —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- `getMyTasks(offset, limit)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–∏—Ö –∑–∞–¥–∞—á
- `getTask(taskId)` - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏
- `updateTask(taskId, updates)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `publishTask(taskId)` - –ø–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–∞—Ü–∏—è –∑–∞–¥–∞—á–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª: `.env`
```env
BOT_API_URL=https://deadlinetaskbot.productlove.ru/api/v1
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ `src/index.ts`:

#### POST `/tasks/send-one`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É –ø–æ ID

**Request:**
```bash
curl -X POST http://localhost:3000/tasks/send-one \
  -H "Content-Type: application/json" \
  -d '{"jobId": "post_1769258057037"}'
```

**Response:**
```json
{
  "success": true,
  "message": "Job post_1769258057037 sent successfully",
  "jobId": "post_1769258057037",
  "apiTaskId": "12345",
  "structuredJob": {
    "title": "–í—ë—Ä—Å—Ç–∫–∞ –Ω–∞ WP + –≥—É—Ç–µ–Ω–±–µ—Ä–≥",
    "budget_from": 40000,
    "budget_to": 120000,
    "tags": ["WordPress", "–≤–µ—Ä—Å—Ç–∫–∞"],
    "deadline": 30
  }
}
```

#### POST `/tasks/send`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –ø–∞–ø–∫–∏ `data/` (–¥–æ 15 –∑–∞ —Ä–∞–∑)

**Request:**
```bash
curl -X POST http://localhost:3000/tasks/send
```

#### DELETE `/tasks/delete`
–£–¥–∞–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Deadline Bot

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- **–î—É–±–ª–∏–∫–∞—Ç—ã**: –í –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–∏ –∑–∞–¥–∞—á–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ ID
- **–≠–º–æ–¥–∑–∏**: –£–¥–∞–ª–µ–Ω—ã —ç–º–æ–¥–∑–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –æ–ø–∏—Å–∞–Ω–∏–π
- **–ö–æ—Ä–æ—Ç–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏**: –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

### –£–ª—É—á—à–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –û—á–∏—Å—Ç–∫–∞ —ç–º–æ–¥–∑–∏ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤: `üìå –í—ë—Ä—Å—Ç–∫–∞ –Ω–∞ WP` ‚Üí `–í—ë—Ä—Å—Ç–∫–∞ –Ω–∞ WP`
- –û—á–∏—Å—Ç–∫–∞ –æ–ø–∏—Å–∞–Ω–∏–π –æ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏
```bash
# –ß–µ—Ä–µ–∑ API
curl -X POST http://localhost:3000/tasks/send-one \
  -H "Content-Type: application/json" \
  -d '{"jobId": "post_1769258057037"}'

# –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
npx ts-node test-send-one.ts post_1769258057037
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
cat sent_jobs_database.json | jq '.'
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í `.env`:
- `BOT_TOKEN` - –≤–∞—à —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
- `MAX_JOBS_TO_PROCESS` - –º–∞–∫—Å–∏–º—É–º –∑–∞–¥–∞—á –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞ —Ä–∞–∑ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15)
- `API_DELAY_MIN` - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
- `API_DELAY_MAX` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –≤ –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚ùå –û—à–∏–±–∫–∏
- ‚ÑπÔ∏è  –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üîÑ –ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–∞–¥–∞—á
curl http://localhost:3000/api/jobs | jq '.jobs[0].id'

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
curl -X POST http://localhost:3000/tasks/send-one \
  -H "Content-Type: application/json" \
  -d '{"jobId": "post_1769258057037"}'
```

### –ú–∞—Å—Å–æ–≤—É—é –æ—Ç–ø—Ä–∞–≤–∫—É (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm start

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ 15 –∑–∞–¥–∞—á
curl -X POST http://localhost:3000/tasks/send
```

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ó–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è rate limit
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤ `sent_jobs_database.json`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É –¥–≤–∞–∂–¥—ã)
- –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç —ç–º–æ–¥–∑–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</content>
<parameter name="filePath">c:\Users\pasaz\WebstormProjects\TgCrawler\API_INTEGRATION_UPDATED.md